{{- $args := list
  (printf "--log-level=%s" .Values.config.logLevel)
  "export-chunks"
  .Values.config.apdbConfig
  .Values.config.ppdbConfig
  (printf "--directory=%s" .Values.config.stagingDirectory)
  "--compression=snappy"
  (printf "--batch-size=%s" .Values.config.batchSize)
  (printf "--min-wait-time=%s" .Values.config.minWaitTime)
  (printf "--max-wait-time=%s" .Values.config.maxWaitTime)
  (printf "--check-interval=%s" .Values.config.checkInterval)
}}
{{- include "ppdb-replication.deployment" (dict
  "Chart" .Chart
  "Values" .Values
  "Release" .Release
  "Template" .Template
  "containerSuffix" "export-chunks"
  "containerArgs" $args
) }}

