{{- $args := list
  (printf "--log-level=%s" .Values.config.logLevel)
  "upload-chunks"
  (printf "--directory=%s" .Values.config.stagingDirectory)
  (printf "--bucket=%s" .Values.config.gcsBucket)
  (printf "--prefix=%s" .Values.config.gcsPrefix)
  "--wait-interval=60"
  "--upload-interval=0"
  "--delete-chunks"
}}
{{- include "ppdb-replication.deployment" (dict
  "Chart" .Chart
  "Values" .Values
  "Release" .Release
  "Template" .Template
  "containerSuffix" "upload-chunks"
  "containerArgs" $args
) }}
