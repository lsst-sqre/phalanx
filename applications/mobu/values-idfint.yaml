replicaCount: 2

resources:
  limits:
    # memory: "3.5Gi"
    memory: "12Gi"
  requests:
    cpu: "50m"
    memory: "1Gi"
terminationGracePeriodSeconds: 3600
config:
  metrics:
    enabled: true
  sentryTracesSampleConfig: 0
  logMonkeysToFile: False
  githubRefreshApp:
    acceptedGithubOrgs:
      - lsst-sqre
  githubCiApp:
    acceptedGithubOrgs:
      - lsst-sqre
      - lsst
    users:
      - username: bot-mobu-ci-user-1
      - username: bot-mobu-ci-user-2
      - username: bot-mobu-ci-user-3
      - username: bot-mobu-ci-user-4
    scopes:
      - "exec:notebook"
      - "exec:portal"
      - "read:image"
      - "read:tap"
  autostart:
    # - name: "scale-test-simple"
    #   count: 1000
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   start_batch_size: 50
    #   start_batch_wait: "1m"
    #   business:
    #     type: "NotebookRunnerInfinite"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "no-code"
    #       execution_idle_time: 1m
    #       delete_lab: false
    #     restart: true
    # - name: "scale-test-butler"
    #   count: 100
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   business:
    #     type: "NotebookRunnerCounting"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "u/fe/butler"
    #       idle_time: 20
    #       execution_idle_time: 0
    #       delete_lab: false
    #     restart: true
    # - name: "scale-test-tap-notebook"
    #   count: 100
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   start_batch_size: 50
    #   start_batch_wait: "1m"
    #   business:
    #     type: "NotebookRunnerCounting"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "u/fe/tap"
    #       idle_time: 0
    #       delete_lab: false
    #     restart: true
    - name: "scale-test-ssotap"
      count: 300
      user_spec:
        username_prefix: "bot-mobu-scale-notebook"
      scopes:
        - "exec:notebook"
        - "exec:portal"
        - "read:image"
        - "read:tap"
      start_batch_size: 50
      start_batch_wait: "1m"
      business:
        type: "NotebookRunnerInfinite"
        options:
          repo_url: "https://github.com/lsst-sqre/scaletest.git"
          repo_ref: "u/stv/ssotap"
          execution_idle_time: "3s"
          idle_time: "1s"
          delete_lab: false
        restart: true
    # - name: "tap-scale"
    #   count: 90
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-tap"
    #   scopes: ["read:tap"]
    #   business:
    #     type: "TAPQuerySetRunner"
    #     options:
    #       query_set: "dp0.2"
    #       sync: false
    #     restart: true
    # - name: "scale-test-tap-notebook"
    #   count: 100
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   start_batch_size: 50
    #   start_batch_wait: "1m"
    #   business:
    #     type: "NotebookRunnerCounting"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "u/fe/tap"
    #       idle_time: 0
    #       delete_lab: false
    #     restart: true
    # - name: "scale-test-qserv"
    #   count: 20
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   start_batch_size: 50
    #   start_batch_wait: "1m"
    #   business:
    #     type: "NotebookRunnerCounting"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "u/fe/qserv"
    #       max_executions: 1
    #       idle_time: "10s"
    #       delete_lab: false
    #     restart: true
    # - name: "scale-test-simple"
    #   count: 100
    #   user_spec:
    #     username_prefix: "bot-mobu-scale-notebook"
    #   scopes:
    #     - "exec:notebook"
    #     - "exec:portal"
    #     - "read:image"
    #     - "read:tap"
    #   start_batch_size: 50
    #   start_batch_wait: "1m"
    #   business:
    #     type: "NotebookRunnerList"
    #     options:
    #       repo_url: "https://github.com/lsst-sqre/scaletest.git"
    #       repo_ref: "main"
    #       execution_idle_time: 1
    #       idle_time: 10
    #       notebooks_to_run:
    #         - TAP_pg.ipynb
    #       delete_lab: false
    #     restart: true
