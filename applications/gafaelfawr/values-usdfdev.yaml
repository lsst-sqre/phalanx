replicaCount: 2

# Use the CSI storage class so that we can use snapshots.
redis:
  persistence:
    storageClass: "wekafs--sdf-k8s01"

config:
  databaseUrl: "postgresql://gafaelfawr@postgres.postgres/gafaelfawr"

  oidcServer:
    enabled: true

  oidc:
    clientId: rubin-usdf-rsp-dev
    audience: "rubin-usdf-rsp-dev"
    loginUrl: "https://dex.slac.stanford.edu/auth"
    tokenUrl: "https://dex.slac.stanford.edu/token"
    issuer: "https://dex.slac.stanford.edu"
    scopes:
    - "openid"
    - "email"
    - "groups"
    - "profile"
    usernameClaim: "name"

  ldap:
    url: ldaps://ldap-unix.slac.stanford.edu:636
    groupBaseDn: ou=Group,dc=slac,dc=stanford,dc=edu
    groupObjectClass: posixGroup
    groupMemberAttr: memberUid    
    userBaseDn: ou=Accounts,dc=slac,dc=stanford,dc=edu
    userSearchAttr: uid
    addUserGroup: false
    uidAttr: uidNumber
    gidAttr: gidNumber
    nameAttr: gecos


  # Allow access by GitHub team.
  groupMapping:
    "admin:token":
      - "rubinmgr"
      - "unix-admin" 
    "exec:admin":
      - "rubinmgr"
      - "unix-admin"
    "exec:notebook":
      - "lsst"
      - lsst-ccs
      - rubin_users
      - rubin_users-a
      - rubin_users-b
      - rubin_users-c
      - rubin_users-d
      - rubin_users-e
      - rubin_users-f
      - rubin_users-g
      - rubin_users-h
      - rubin_users-i
      - rubin_users-j
      - rubin_users-k
      - rubin_users-l
      - rubin_users-m
      - rubin_users-n
      - rubin_users-o
      - rubin_users-p
      - rubin_users-q
      - rubin_users-r
      - rubin_users-s
      - rubin_users-t
      - rubin_users-u
      - rubin_users-v
      - rubin_users-w
      - rubin_users-x
      - rubin_users-y
      - rubin_users-z
      - rubin_admin_datasets
      - rubin_admin_repos
      - "unix-admin"
    "exec:portal":
      - "lsst"
      - lsst-ccs
      - rubin_users
      - rubin_users-a
      - rubin_users-b
      - rubin_users-c
      - rubin_users-d
      - rubin_users-e
      - rubin_users-f
      - rubin_users-g
      - rubin_users-h
      - rubin_users-i
      - rubin_users-j
      - rubin_users-k
      - rubin_users-l
      - rubin_users-m
      - rubin_users-n
      - rubin_users-o
      - rubin_users-p
      - rubin_users-q
      - rubin_users-r
      - rubin_users-s
      - rubin_users-t
      - rubin_users-u
      - rubin_users-v
      - rubin_users-w
      - rubin_users-x
      - rubin_users-y
      - rubin_users-z
      - rubin_admin_datasets
      - rubin_admin_repos
      - "unix-admin"
    "exec:user":
      - "lsst"
      - lsst-ccs
      - rubin_users
      - rubin_users-a
      - rubin_users-b
      - rubin_users-c
      - rubin_users-d
      - rubin_users-e
      - rubin_users-f
      - rubin_users-g
      - rubin_users-h
      - rubin_users-i
      - rubin_users-j
      - rubin_users-k
      - rubin_users-l
      - rubin_users-m
      - rubin_users-n
      - rubin_users-o
      - rubin_users-p
      - rubin_users-q
      - rubin_users-r
      - rubin_users-s
      - rubin_users-t
      - rubin_users-u
      - rubin_users-v
      - rubin_users-w
      - rubin_users-x
      - rubin_users-y
      - rubin_users-z
      - rubin_admin_datasets
      - rubin_admin_repos
      - "unix-admin"
    "read:tap":
      - "lsst"
      - lsst-ccs
      - rubin_users
      - rubin_users-a
      - rubin_users-b
      - rubin_users-c
      - rubin_users-d
      - rubin_users-e
      - rubin_users-f
      - rubin_users-g
      - rubin_users-h
      - rubin_users-i
      - rubin_users-j
      - rubin_users-k
      - rubin_users-l
      - rubin_users-m
      - rubin_users-n
      - rubin_users-o
      - rubin_users-p
      - rubin_users-q
      - rubin_users-r
      - rubin_users-s
      - rubin_users-t
      - rubin_users-u
      - rubin_users-v
      - rubin_users-w
      - rubin_users-x
      - rubin_users-y
      - rubin_users-z
      - rubin_admin_datasets
      - rubin_admin_repos
      - "unix-admin"
    "read:image":
      - "lsst"
      - lsst-ccs
      - rubin_users
      - rubin_users-a
      - rubin_users-b
      - rubin_users-c
      - rubin_users-d
      - rubin_users-e
      - rubin_users-f
      - rubin_users-g
      - rubin_users-h
      - rubin_users-i
      - rubin_users-j
      - rubin_users-k
      - rubin_users-l
      - rubin_users-m
      - rubin_users-n
      - rubin_users-o
      - rubin_users-p
      - rubin_users-q
      - rubin_users-r
      - rubin_users-s
      - rubin_users-t
      - rubin_users-u
      - rubin_users-v
      - rubin_users-w
      - rubin_users-x
      - rubin_users-y
      - rubin_users-z
      - rubin_admin_datasets
      - rubin_admin_repos
      - "unix-admin"

  initialAdmins:
    - "afausti"
    - "athor"
    - "cbanek"
    - "frossie"
    - "jonathansick"
    - "rra"
    - "simonkrughoff"
    - "ytl"
    - "ppascual"

  errorFooter: |
    To report problems or ask for help, please open an issue in the
    <a href="https://github.com/rubin-dp0/Support/issues">GitHub
    rubin-dp0/Support project</a>.

cloudsql:
  enabled: false

