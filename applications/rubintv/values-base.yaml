rubintv:
  siteTag: "base"

  imagePullSecrets:
  - name: pull-secret

  frontend:
    debug: true
    env:
    - name: S3_ENDPOINT_URL
      value: &s3E "https://s3.ls.lsst.org"
    - name: RAPID_ANALYSIS_LOCATION
      value: "BTS"
    - name: DDV_DEPLOY_BRANCH
      value: &dbE "deploy-bts"
    - name: DDV_BASE_HREF
      value: "/rubintv/ddv/"
    - name: DDV_CLIENT_WS_ADDRESS
      value: "rubintv/ws/ddv"
    - name: RA_REDIS_HOST
      value: "redis-service.rapid-analysis.svc.cluster.local"
    envSecrets:
    - name: RA_REDIS_PASSWORD
      secretName: rubintv-secrets
      secretKey: ra-redis-password
    image:
      tag: tickets-DM-52548
      pullPolicy: Always

  workers:
    replicas: 1
    image:
      repository: ghcr.io/lsst-sitcom/rubintv_production
      tag: tickets-DM-52563
      pullPolicy: Always
    uid: 73006
    gid: 73006
    scriptsLocation: /repos/rubintv_analysis_service/scripts
    script: rubintv_worker.py -a rubintv -p 8080 -l base
    env:
    - name: SCRIPTS_LOCATION
      value: "/repos/rubintv_analysis_service/scripts"
    - name: S3_ENDPOINT_URL
      value: *s3E
    - name: DAF_BUTLER_REPOSITORY_INDEX
      value: "/project/data-repos.yaml"
    - name: LSST_RESOURCES_S3_PROFILE_butler
      value: *s3E
    - name: PGUSER
      value: "oods"
    - name: DEPLOY_BRANCH
      value: *dbE
    nfsMountpoint:
    - name: project-shared
      containerPath: /project
      readOnly: false
      server: nfs-project.ls.lsst.org
      serverPath: /project
    resources:
      limits:
        cpu: 2.0
        memory: "8Gi"
